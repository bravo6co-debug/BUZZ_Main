# Buzz 모바일웹 - 상세 기획서
> Version: 2.0  
> Last Updated: 2025-08-30  
> 구현 상태: UI 75% 완료, 백엔드 0%

## 📱 서비스 개요

### 타겟 사용자
- **주요**: 지역 3개 대학 학생들
- **확장**: 남구 방문 관광객
- **목표**: 리퍼럴을 통한 바이럴 마케팅 참여

### 핵심 가치 제안
- 리퍼럴로 수익 창출
- 할인 혜택으로 실질적 절약
- 마일리지로 추가 혜택

---

## 🎨 UI/UX 설계

### Bottom Navigation 구조
```
[🏠 홈] [🗺️ 지역추천] [🎪 이벤트] [👤 마이] [🎓 마케터]
```

### 컬러 시스템
- **Primary**: #007AFF (블루)
- **Secondary**: #34C759 (그린) 
- **Warning**: #FF9500 (오렌지)
- **Danger**: #FF3B30 (레드)
- **Background**: #F2F2F7 (라이트 그레이)

---

## 🏠 홈 페이지 설계

### 주요 기능
1. **로그인/로그아웃** 상단 우측
2. **추천 매장 카드** 메인 영역 (Admin에서 실시간 관리)
   - 추천 순서 Admin 제어
   - 노출 조건 설정 가능
   - A/B 테스트 지원
3. **매장 카테고리 필터** 하단 (Admin에서 카테고리 관리)
4. **커뮤니티 버튼** 상단 우측
5. **메인 배너/캐러셀** (Admin에서 컨텐츠 관리)

### UI 레이아웃
```
┌─────────────────────────────────┐
│ [로그인]                [👥 커뮤니티] │
├─────────────────────────────────┤
│ 🏪 추천 매장                     │
│ ┌─────┐ ┌─────┐ ┌─────┐        │
│ │매장1│ │매장2│ │매장3│        │
│ │★4.5│ │★4.2│ │★4.8│        │
│ │🎫3천원│ │🎫5천원│ │🎫할인│        │
│ └─────┘ └─────┘ └─────┘        │
├─────────────────────────────────┤
│ 🏷️ [전체] [카페] [음식점] [기타]  │
└─────────────────────────────────┘
```

### 매장 카드 정보
- **매장 대표 이미지** (정사각형)
- **매장명** + **평점** (별점)
- **사용 가능한 할인** 표시
- **카테고리** 태그
- **클릭시 상세 모달** 표시

### 매장 노출 로직 (공평한 로테이션 시스템)

#### 🎯 핵심 원칙: 모든 매장 공평한 기회
- **순환 노출**: 모든 등록 매장이 공평하게 노출
- **차별 없음**: 매출, 평점에 따른 우선순위 없음
- **투명성**: 노출 순서와 빈도 공개

#### 📱 사용자 후킹을 위한 스마트 구성

##### 1. **오늘의 추천** (매일 자동 변경)
```
[오늘의 할인 맛집] [오늘의 카페] [오늘의 HOT플레이스]
   랜덤 3개           랜덤 3개        랜덤 3개
```
- 매일 0시 자동 갱신
- 모든 매장이 월 1회 이상 메인 노출 보장

##### 2. **시간대별 맞춤 노출** (공평한 카테고리 로테이션)
- **아침 (06-10시)**: 카페/브런치 카테고리 전체 랜덤 표시
- **점심 (11-14시)**: 음식점 카테고리 전체 랜덤 표시  
- **저녁 (17-21시)**: 음식점/술집 카테고리 전체 랜덤 표시
- **밤 (21-02시)**: 술집/편의점 카테고리 전체 랜덤 표시

##### 3. **실시간 이벤트 배너** (후킹 포인트)
```
🔥 지금 이 매장 할인 중! → 실시간 쿠폰 사용 가능 매장
💰 마일리지 사용 가능!  → 마일리지 허용 매장 리스트
🎁 신규 오픈 이벤트!    → 최근 30일 내 가입 매장
```

#### 📊 공평한 노출 보장 시스템

##### 노출 횟수 추적
```typescript
interface FairExposure {
  businessId: string;
  dailyViews: number;      // 일일 노출 횟수
  weeklyViews: number;     // 주간 노출 횟수
  monthlyViews: number;    // 월간 노출 횟수
  lastMainExposure: Date;  // 마지막 메인 노출일
}
```

##### 로테이션 알고리즘
1. **균등 분배**: 노출 횟수가 적은 매장 우선
2. **카테고리 균형**: 각 카테고리별 균등 노출
3. **시간 분산**: 같은 매장이 연속 노출되지 않음
4. **월간 보장**: 모든 매장 최소 노출 횟수 보장

#### 🎨 사용자 관심 유도 전략 (공평성 유지)

##### 1. **리얼타임 "지금 뜨는" 섹션**
- 최근 1시간 내 QR 사용된 매장 (실시간)
- 단순 활동 표시, 순위 없음

##### 2. **테마별 큐레이션** (전체 순환)
- "비 오는 날 좋은 곳" → 해당 태그 매장 전체 랜덤
- "데이트 코스" → 해당 태그 매장 전체 랜덤
- Admin이 테마만 설정, 노출은 공평하게

##### 3. **사용자 필터 기능** (자율 선택)
- 거리순 (사용자 위치 기반)
- 카테고리별
- 할인 가능 매장
- 신규 매장

### 매장 상세 모달
```
┌─────────────────────────────────┐
│ [←] 매장명                 [❤️] │
├─────────────────────────────────┤
│ 📸 [이미지 슬라이더]             │
├─────────────────────────────────┤
│ ⭐ 4.5점 (리뷰 23개)            │
│ 📍 부산 남구 XX로 123           │
│ 📞 051-123-4567                │
│ 🕐 09:00 - 21:00               │
├─────────────────────────────────┤
│ 🎫 사용 가능한 할인              │
│ • 기본 할인 쿠폰 3,000원         │
│ • 마일리지 사용 가능             │
├─────────────────────────────────┤
│ 📝 리뷰 (최신순)                │
│ "맛있어요!" ⭐⭐⭐⭐⭐           │
│ "친절하세요" ⭐⭐⭐⭐            │
├─────────────────────────────────┤
│ [🗺️ 길찾기] [💬 리뷰쓰기]        │
└─────────────────────────────────┘
```

### API 요구사항
- `GET /api/businesses/featured` - 추천 매장 목록
- `GET /api/businesses/categories` - 카테고리 목록
- `GET /api/businesses/:id` - 매장 상세 정보
- `POST /api/businesses/:id/reviews` - 리뷰 작성

---

## 🎯 팝업 배너 시스템 (Phase 2 구현 예정) ❌ 미구현

### 팝업 배너 표시 로직
- **자동 로드**: 앱 진입시 활성 팝업 확인
- **노출 빈도 체크**: localStorage 기반 빈도 제어
- **타겟팅 검증**: 사용자 조건 확인 후 표시
- **우선순위 정렬**: priority 높은 순으로 표시

### 팝업 배너 UI
```
┌─────────────────────────────────┐
│                                 │
│     [반투명 오버레이]            │
│                                 │
│    ┌───────────────────┐        │
│    │                   │        │
│    │   [팝업 이미지]    │        │
│    │                   │        │
│    ├───────────────────┤        │
│    │ 제목: 특별 이벤트  │        │
│    │ 내용: 12월 한정!  │        │
│    ├───────────────────┤        │
│    │ [자세히 보기]     │        │
│    └───────────────────┘        │
│           [X 닫기]              │
│                                 │
└─────────────────────────────────┘
```

### 팝업 배너 위치 옵션
1. **Center (기본)**: 화면 중앙 표시
2. **Bottom**: 하단 슬라이드업
3. **Top**: 상단 알림바 형식
4. **Fullscreen**: 전체 화면 오버레이

### 팝업 배너 동작
```javascript
// 노출 빈도 제어
const checkFrequency = (banner) => {
  const lastShown = localStorage.getItem(`popup_${banner.id}_lastShown`);
  const frequency = banner.displayFrequency;
  
  switch(frequency) {
    case 'once_ever':
      return !lastShown;
    case 'once_per_day':
      return !isToday(lastShown);
    case 'once_per_week':
      return !isThisWeek(lastShown);
    case 'always':
      return true;
  }
};

// 타겟팅 조건 확인
const checkTargeting = (banner, user) => {
  if (!banner.targetConditions) return true;
  
  const conditions = banner.targetConditions;
  if (conditions.minVisits && user.visitCount < conditions.minVisits) {
    return false;
  }
  if (conditions.university && user.university !== conditions.university) {
    return false;
  }
  if (conditions.joinedWithin && daysSinceJoined(user) > conditions.joinedWithin) {
    return false;
  }
  return true;
};
```

### 팝업 배너 애니메이션
- **Fade**: 페이드인/아웃 효과
- **Slide**: 슬라이드 진입 효과
- **Zoom**: 확대/축소 효과
- **None**: 즉시 표시

### 팝업 배너 상호작용
```
┌─────────────────────────────────┐
│ 사용자 액션 추적                 │
├─────────────────────────────────┤
│ • View: 팝업 노출시 자동 기록    │
│ • Click: CTA 버튼 클릭시        │
│ • Close: X 버튼 클릭시          │
│ • Auto Close: 자동 닫힘시       │
├─────────────────────────────────┤
│ 추적 데이터:                    │
│ - popup_banner_id               │
│ - user_id (로그인시)            │
│ - session_id                    │
│ - action                        │
│ - timestamp                     │
└─────────────────────────────────┘
```

### 팝업 배너 성능 최적화
- **이미지 프리로드**: 백그라운드 다운로드
- **레이지 로딩**: 필요시점 로드
- **캐싱**: 24시간 브라우저 캐시
- **CDN 활용**: 빠른 이미지 전송

### 팝업 배너 A/B 테스트
- **변형 관리**: Admin에서 A/B 버전 설정
- **자동 분배**: 50:50 랜덤 배포
- **성과 측정**: 클릭률, 전환율 추적
- **승자 결정**: 통계적 유의성 도달시

### API 요구사항
- `GET /api/popup-banners/active` - 활성 팝업 목록
- `POST /api/popup-banners/:id/impression` - 노출/액션 기록

---

## 🗺️ 지역추천 페이지

### 컨텐츠 구성 (Admin 통합 관리)
- **관광지** 카드 리스트 (Admin에서 실시간 관리)
- **포토스팟** 추천 (Admin에서 순서/노출 제어)
- **계절 특집** (Admin 템플릿 기반, 스케줄링 가능)
- **맛집 투어** 코스 (Admin에서 큐레이션)

### UI 레이아웃 (카드 그리드 방식)
```
┌─────────────────────────────────┐
│ 🗺️ 지역 추천                    │
│ [전체] [관광지] [포토스팟] [맛집] │
├─────────────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐        │
│ │이미지│ │이미지│ │이미지│        │
│ │     │ │     │ │     │        │
│ ├─────┤ ├─────┤ ├─────┤        │
│ │이기대│ │용호만│ │현대  │        │
│ │해안  │ │카페  │ │미술관│        │
│ │★4.8│ │★4.5│ │★4.7│        │
│ │#포토│ │#카페│ │#문화│        │
│ └─────┘ └─────┘ └─────┘        │
│                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐        │
│ │이미지│ │이미지│ │이미지│        │
│ │     │ │     │ │     │        │
│ ├─────┤ ├─────┤ ├─────┤        │
│ │오륙도│ │문탠  │ │UN   │        │
│ │스카이│ │로드  │ │공원 │        │
│ │★4.6│ │★4.4│ │★4.5│        │
│ │#전망│ │#야경│ │#산책│        │
│ └─────┘ └─────┘ └─────┘        │
├─────────────────────────────────┤
│ [더보기]                         │
└─────────────────────────────────┘
```

### 지역추천 카드 상세
```
┌─────────────────────────────────┐
│ 각 카드 클릭시 상세 모달          │
├─────────────────────────────────┤
│ [←] 이기대 해안산책로       [❤️] │
├─────────────────────────────────┤
│ 📸 [이미지 슬라이더]             │
├─────────────────────────────────┤
│ ⭐ 4.8점 (방문자 리뷰)          │
│ 📍 부산 남구 이기대공원로 85     │
│ 🕐 24시간 개방                  │
│ 💰 무료                         │
├─────────────────────────────────┤
│ 📝 소개                          │
│ 부산의 대표적인 해안 산책로로    │
│ 오륙도와 광안대교를 한눈에      │
│ 볼 수 있는 최고의 뷰포인트      │
├─────────────────────────────────┤
│ 🏷️ #포토스팟 #일몰 #데이트코스   │
├─────────────────────────────────┤
│ 💡 Admin 설정 정보               │
│ • 노출 순서: 1순위              │
│ • 노출 기간: 상시               │
│ • 타겟: 전체 사용자             │
├─────────────────────────────────┤
│ [🗺️ 지도보기] [📤 SNS 공유]     │
└─────────────────────────────────┘
```

### SNS 공유 기능
- **카카오톡**, **인스타그램** 직접 공유
- **공유용 이미지** 자동 생성
- **리퍼럴 링크** 포함

---

## 🎪 이벤트 페이지

### 이벤트 타입 (Admin 통합 관리)
1. **가입 이벤트** (Admin에서 조건/보상 설정)
2. **리퍼럴 보상** 이벤트 (Admin에서 목표/보상 관리)
3. **매장 특가** 이벤트 (Admin에서 매장별 설정)
4. **계절 프로모션** (Admin에서 기간/내용 제어)

**Admin 제어 기능:**
- 이벤트 생성/수정/삭제
- 노출 기간 및 조건 설정
- 자동 종료 규칙
- 실시간 활성화/비활성화
- 참여자 통계 및 당첨자 관리

### UI 레이아웃 (카드 그리드 방식)
```
┌─────────────────────────────────┐
│ 🎪 이벤트                        │
│ [진행중] [예정] [종료]           │
├─────────────────────────────────┤
│ ┌─────┐ ┌─────┐ ┌─────┐        │
│ │배너  │ │배너  │ │배너  │        │
│ │이미지│ │이미지│ │이미지│        │
│ ├─────┤ ├─────┤ ├─────┤        │
│ │신규  │ │리퍼럴│ │매장  │        │
│ │가입  │ │챌린지│ │특가  │        │
│ │이벤트│ │이벤트│ │이벤트│        │
│ │D-7  │ │D-15 │ │D-3  │        │
│ │🎁1만원│ │🎁5천P│ │🎁30%│        │
│ └─────┘ └─────┘ └─────┘        │
│                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐        │
│ │배너  │ │배너  │ │배너  │        │
│ │이미지│ │이미지│ │이미지│        │
│ ├─────┤ ├─────┤ ├─────┤        │
│ │크리스│ │연말  │ │첫구매│        │
│ │마스  │ │결산  │ │할인  │        │
│ │특집  │ │이벤트│ │이벤트│        │
│ │D-20 │ │D-30 │ │상시  │        │
│ │🎁특별│ │🎁경품│ │🎁50%│        │
│ └─────┘ └─────┘ └─────┘        │
├─────────────────────────────────┤
│ [더보기]                         │
└─────────────────────────────────┘
```

### 이벤트 카드 상세
```
┌─────────────────────────────────┐
│ [←] 신규가입 대박 이벤트    [❤️] │
├─────────────────────────────────┤
│ 📸 [이벤트 배너 이미지]          │
├─────────────────────────────────┤
│ 🎉 이벤트 내용                   │
│ • 혜택: 가입시 10,000P + 5,000원 쿠폰│
│ • 기간: 2024.12.01 ~ 12.31      │
│ • 대상: 신규 가입자              │
│ • 참여: 자동 지급               │
├─────────────────────────────────┤
│ 📊 현재 참여 현황                │
│ • 참여자: 1,234명               │
│ • 남은 수량: 무제한              │
├─────────────────────────────────┤
│ 💡 Admin 설정 정보               │
│ • 노출 순서: 1순위              │
│ • 자동 종료: 2024.12.31         │
│ • 타겟: 비회원                  │
├─────────────────────────────────┤
│ [참여하기] [공유하기]            │
└─────────────────────────────────┘
```

---

## 👤 마이 페이지

### 주요 섹션
1. **내 정보** 관리
2. **QR 쿠폰** 관리
3. **마일리지** 관리
4. **앱 설정**

### UI 레이아웃
```
┌─────────────────────────────────┐
│ 👤 김○○님 안녕하세요!            │
│ [프로필 수정]                   │
├─────────────────────────────────┤
│ 🎫 내 쿠폰 (3개)                │
│ • 기본 할인 3,000원 (D-15)      │
│ • 가입 축하 5,000원 (D-30)      │
│ • 이벤트 30% 할인 (D-7)         │
│ [QR 코드 보기]                  │
├─────────────────────────────────┤
│ 💰 마일리지 15,000P             │
│ [사용내역] [QR 코드 생성]        │
├─────────────────────────────────┤
│ ⚙️ 설정                         │
│ [알림설정] [개인정보] [로그아웃]  │
└─────────────────────────────────┘
```

### 쿠폰 QR 코드 모달
```
┌─────────────────────────────────┐
│ [←] 할인 쿠폰                    │
├─────────────────────────────────┤
│ ┌─────────────────────────────┐ │
│ │                             │ │
│ │      [QR 코드]              │ │
│ │                             │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ 🎫 가입 축하 쿠폰                │
│ 💰 5,000원 할인                 │
│ 📅 2024.12.31까지              │
│ 💡 매장에서 QR을 스캔해주세요    │
└─────────────────────────────────┘
```

### 마일리지 QR 생성
```
┌─────────────────────────────────┐
│ [←] 마일리지 사용                │
├─────────────────────────────────┤
│ 💰 보유 마일리지: 15,000P        │
├─────────────────────────────────┤
│ ┌─────────────────────────────┐ │
│ │                             │ │
│ │      [QR 코드]              │ │
│ │                             │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ ⏰ 5분 후 만료됩니다             │
│ 💡 매장에서 사용할 금액을 말씀해주세요 │
│ [새로고침]                      │
└─────────────────────────────────┘
```

---

## 🎓 마케터 페이지

### 핵심 기능
1. **리퍼럴 링크** 생성 및 복사
2. **성과 대시보드** 실시간 확인
3. **공유 도구** (4개 플랫폼)
4. **마케팅 교육** (모달)

### UI 레이아웃
```
┌─────────────────────────────────┐
│ 🔗 내 리퍼럴 링크               │
│ ┌─────────────────┐             │
│ │ https://buzz... │ [📋 복사]    │
│ └─────────────────┘             │
├─────────────────────────────────┤
│ 📤 공유하기                     │
│ [💬 카카오톡] [🧵 쓰레드]        │
│ [📝 블로그]   [📹 유튜브]        │
├─────────────────────────────────┤
│ 📊 내 성과                      │
│ 방문 123명 │ 가입 45명 │ 수익 25,000원 │
│ 전환율 36.6% │ 이번달 순위 #12   │
│ [▶ 상세 보기]                   │
├─────────────────────────────────┤
│ [📚 마케팅 공부하기] [🏆 랭킹보기] │
└─────────────────────────────────┘
```

### 공유 기능 상세
- **카카오톡**: 카카오링크 API 활용
- **쓰레드**: 링크 복사 + 앱 연동
- **블로그**: 복사 + 블로그 포스팅 안내
- **유튜브**: 복사 + 댓글 작성 안내

### 성과 상세 모달
```
┌─────────────────────────────────┐
│ [←] 내 리퍼럴 성과               │
├─────────────────────────────────┤
│ 📈 이번 달 성과                  │
│ • 총 방문자: 123명              │
│ • 신규 가입: 45명               │
│ • 전환율: 36.6%                │
│ • 누적 수익: 25,000원           │
├─────────────────────────────────┤
│ 📅 최근 활동                     │
│ • 12/15 김○○님 가입 (+500P)     │
│ • 12/14 방문자 3명              │
│ • 12/13 이○○님 가입 (+500P)     │
├─────────────────────────────────┤
│ 🎯 다음 목표                     │
│ 50명 달성시 보너스 5,000P!      │
│ ████████░░ 90%                 │
└─────────────────────────────────┘
```

---

## 💬 커뮤니티 모달

### 게시판 구조
- **자유 게시판**: 일반 대화
- **팁 공유**: 리퍼럴 노하우
- **후기**: 매장 이용 후기
- **Q&A**: 질문과 답변

### UI 레이아웃
```
┌─────────────────────────────────┐
│ [✕] 💬 커뮤니티                  │
├─────────────────────────────────┤
│ [자유] [팁] [후기] [Q&A]         │
├─────────────────────────────────┤
│ 📝 [새 글 쓰기]                 │
├─────────────────────────────────┤
│ 📌 공지: 이번 달 이벤트 안내      │
│ 👍 25  💬 3   12시간전           │
├─────────────────────────────────┤
│ 💰 리퍼럴로 이번달 10만원!       │
│ 👍 15  💬 3   2시간전            │
├─────────────────────────────────┤
│ 🏪 ○○카페 할인 받고 왔어요       │
│ 👍 8   💬 1   4시간전            │
└─────────────────────────────────┘
```

---

## 🔐 인증 플로우 ❌ 미구현

### 회원가입 (소셜 로그인 필수) ❌ 미구현
1. 리퍼럴 링크 접속시 → 방문 추적 → 기본 쿠폰 지급 ❌
2. **Google/Kakao 소셜 로그인 선택** (필수) ❌ OAuth 미연동
3. 추가 정보 입력 (전화번호, 대학교, 마케팅 동의) ✅ UI만 구현
4. 리퍼럴 코드 자동 생성 ❌
5. 가입 보너스 지급 (쿠폰 + 마일리지) ❌
6. 추천인에게 리퍼럴 보상 ❌

**구현 필요사항:**
- Google OAuth 2.0 설정
- Kakao OAuth 2.0 설정
- JWT 토큰 관리 시스템
- 리퍼럴 추적 백엔드

### 로그인 UI
```
┌─────────────────────────────────┐
│        Buzz 로그인               │
├─────────────────────────────────┤
│                                 │
│ [🔷 Google로 시작하기]          │
│                                 │
│ [💬 카카오로 시작하기]          │
│                                 │
│ ─────── 또는 ──────             │
│                                 │
│ 리퍼럴 링크가 있으신가요?        │
│ [리퍼럴 코드 입력]              │
│                                 │
└─────────────────────────────────┘
```

### 특징
- **이메일/비밀번호 방식 제거** (소셜 로그인만 사용)
- Google OAuth 2.0 / Kakao OAuth 2.0
- 빠른 가입 프로세스 (원클릭)

---

## 🔄 Admin 연동 사항

### 실시간 컨텐츠 동기화
- **Supabase Realtime**을 통한 즉시 업데이트
- Admin에서 변경시 앱에 즉시 반영
- 캐시 무효화 및 자동 새로고침

### Admin 제어 영역
1. **홈 화면**: 추천 매장, 배너, 카테고리
2. **지역추천**: 모든 컨텐츠, 순서, 태그
3. **이벤트**: 생성, 수정, 노출 제어
4. **마케터**: 교육 자료, 캠페인, 랭킹
5. **커뮤니티**: 공지, 카테고리, 신고 처리
6. **팝업/알림**: 긴급 공지, 시스템 메시지

### 컨텐츠 스케줄링
- Admin에서 예약 게시 설정
- 자동 시작/종료
- 타겟 사용자 그룹 설정

---

## 📊 주요 지표 추적

### 사용자 행동 분석
- 페이지별 체류 시간
- 리퍼럴 링크 클릭률
- 쿠폰 사용률
- 마일리지 사용 패턴

### 비즈니스 지표
- 일간/주간 활성 사용자
- 리퍼럴 전환율
- 평균 수익per사용자
- 매장별 이용률